function supportCss3(a){var b,c=["webkit","Moz","ms","o"],d=[],e=document.documentElement.style,f=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};for(b in c)d.push(f(c[b]+"-"+a));d.push(f(a));for(b in d)if(d[b]in e)return!0;return!1}function IsPC(){return(/(iPhone|iPod|iOS)/i.test(navigator.userAgent)||/(Android)/i.test(navigator.userAgent)||/(Windows Phone)/i.test(navigator.userAgent)||/(Mobile)/i.test(navigator.userAgent))&&$(window).width()<768?!0:!1}var stopBubble=function(a){return a&&a.stopPropagation?a.stopPropagation():window.event.cancelBubble=!0,!1};$(function(){function a(){return $("body").height()}function b(a){if(!i){a=a>0?1:-1;var b=e.data("index_flag")?e.data("index_flag"):0,c=f.eq(b),d=b?b:0;if(d-=a,d=0>d?0:d=d>g-1?g-1:d,c.hasClass("has_photo_list")){{var h=c.data("flag"),j=c.data("p_index");c.data("p_length")}0>a&&"end"==h||a>0&&"start"==h?p.eq(d).click():(j=Number(j)-Number(a),c.find(".p_pagination li").eq(j).click())}else p.eq(d).click()}}function c(){$("body").addClass("isMobile"),e.height(1.40625*$("body").width())}var d=1e3,e=$(".section_group"),f=e.find(">section"),g=f.length,h=e.find(">.has_photo_list"),i=!1,j=supportCss3("transition"),k=supportCss3("background-size"),l=IsPC(),m=$("#menu_btn"),n=$(".index_menu"),o=$(".index_menu li");if(m.bind("click",function(a){n.toggleClass("current"),stopBubble(a)}),o.bind("click",function(a){stopBubble(a)}),n.bind({click:function(a){n.toggleClass("current"),stopBubble(a)},touchmove:function(a){a.preventDefault()}}),l)return void c();$("html,body").animate({scrollTop:0},400),j||$("body").addClass("no_css3"),k||($("body").addClass("no_bgsize"),$(".hasEm").each(function(){var a=$(this),b=a.css("background-image");b=b.replace(/url\(\"/,""),b=b.replace(/\"\)/,""),"none"!=b&&a.prepend('<img class="no_bgsize_img" src="'+b+'">')}).css("background-image","none")),function(){var a=g;if(a>0){html=['<ul class="pagination"><li class="active"><span></span><aside>'+f.eq(0).data("title")+"</aside></li>"];for(var b=1;a>b;b++){var c=f.eq(b),d=c.data("title"),e="";d&&(e="<aside>"+d+"</aside>"),html.push("<li><span></span>"+e+"</li>")}html.push("</ul>"),$("body").append(html.join(""))}}(),h.each(function(){var a=$(this),b=a.find(".photo_list"),c=b.find(">li"),e=c.length;b.css({width:100*e+"%"}),c.css({width:100/e+"%"}),a.data({flag:"start",p_index:0,p_length:e});for(var f=['<div class="p_pagination"><ul>'],g=0;e>g;g++){var h=c.eq(g),k=0==g?"active":"",l=h.data("title");f.push('<li class="'+k+'"><span>'+l+"</span></li>")}f.push("</ul></div>"),a.append(f.join(""));var m=a.find(".p_pagination li");m.bind("touchstart click",function(){var f=$(this),g=f.index();i=!0,m.removeClass("active"),f.addClass("active"),j?b.css({transform:"translateX(-"+100*g/e+"%)","-webkit-transform":"translateX(-"+100*g/e+"%)"}):b.animate({left:"-"+100*g+"%"},{duration:d,easing:"swing"}),c.eq(g).addClass("active"),setTimeout(function(){c.not(":eq("+g+")").removeClass("active"),i=!1},d),0==g?a.data({flag:"start",p_index:g}).attr("data-index",g):g==e-1?a.data({flag:"end",p_index:g}).attr("data-index",g):a.data({flag:"normal",p_index:g}).attr("data-index",g)})});var p=$(".pagination li");p.bind("touchstart click",function(){if(!i){var b=$(this),c=b.index(),g=f.eq(c),h=100*c,k=e.data("index_flag")?e.data("index_flag"):0,l=f.eq(k),m=c>=k?-1:1;if(0==k){var n=$(".area_index_01"),o=$(".area_index_02");if(l.hasClass("need_stop")&&k!=c&&1==c)return i=!0,l.removeClass("need_stop").addClass("need_start"),j?(n.css({transform:"translateY(-300px)"}),o.css({transform:"translateY(-300px)"})):n.animate({"margin-top":"-300px"},{duration:d,easing:"swing"}),void setTimeout(function(){i=!1},d);(l.hasClass("need_start")||k==c)&&(l.removeClass("need_start").addClass("need_stop"),j?(n.css({transform:"translateY(0)"}),o.css({transform:"translateY(0)"})):n.animate({"margin-top":"0px"},{duration:d,easing:"swing"}))}if(k!=c){if(p.removeClass("active"),b.addClass("active"),g.addClass("current"),0==g.nextAll().length&&(h=100*(c-1+g.height()/a())),l.hasClass("has_photo_list")&&l.removeClass("photo_animate").find(".photo_list li").removeClass("active"),g.hasClass("has_photo_list")){var q=(g.data("flag"),g.find(".p_pagination ul"));m>0?q.children("li:last-child").click():q.children("li:first-child").click()}i=!0,j?e.data("index_flag",c).css({transform:"translateY(-"+h+"%)","-webkit-transform":"translateY(-"+h+"%)"}):e.data("index_flag",c).animate({top:"-"+h+"%"},{duration:d,easing:"swing"}),setTimeout(function(){i=!1,l.removeClass("current"),g.hasClass("has_photo_list")&&g.addClass("photo_animate")},d)}}}),$(document).bind("mousewheel",function(a,c){b(c)}).keydown(function(a){38==a.keyCode?b(1):40==a.keyCode&&b(-1)});var q=0,r=0,s=0,t=0;f.bind({touchstart:function(a){q=a.originalEvent.changedTouches[0].pageX,r=a.originalEvent.changedTouches[0].pageY,a.preventDefault()},touchend:function(a){s=a.originalEvent.changedTouches[0].pageX,t=a.originalEvent.changedTouches[0].pageY;var b=t-r;if(b>30||-30>b){if(i)return;var c=b>0?1:-1,d=e.data("index_flag"),f=d?d:0;f-=c,f=0>f?0:f=f>g-1?g-1:f,p.eq(f).click()}a.preventDefault()}}),$("a").bind({touchstart:function(){$(this).attr("href")&&(location.href=$(this).attr("href"))}}),h.bind({touchstart:function(a){q=a.originalEvent.changedTouches[0].pageX,r=a.originalEvent.changedTouches[0].pageY,a.preventDefault()},touchend:function(a){s=a.originalEvent.changedTouches[0].pageX,t=a.originalEvent.changedTouches[0].pageY;var b=s-q;if(b>30||-30>b){if(i)return;var c=$(this),d=c.data("p_index"),e=c.data("p_length"),f=b>0?1:-1,g=d?d:0;g-=f,g=0>g?e-1:g=g>e-1?0:g,c.find(".p_pagination li").eq(g).click()}a.preventDefault()}}),$(".scroll_down").bind("touchstart click",function(){b(-1)}),$("#btn_home").bind("touchstart click",function(){p.eq(0).click()})});