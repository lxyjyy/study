<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dhl.tools.mapper.CommonMapper">

	<select id="findCargoLocationList" resultType="map">
		select 
			c.id,
			c.code,
			t.code as typeCode,
			c.score
		from CargoLocation c 
		inner join CargoLocationType t on c.typeId = t.id
		<trim prefix="WHERE" prefixOverrides="AND |OR">
			<if test="wareHouseId != null and wareHouseId != ''">
				and c.wareHouseId = #{wareHouseId}
			</if>
			<if test="code != null and code != ''">
				and c.code like '%'+#{code}+'%'
			</if>
			<if test="typeId != null and typeId != ''">
				and c.typeId = #{typeId}
			</if>
		</trim>
		order by c.createDate desc,c.batchSerialNumber asc
	</select>
	
	<insert id="batchInsertTypeData" parameterType="com.dhl.tools.domain.MaterialCargoLocationTypeData">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
        SELECT @@IDENTITY
    </selectKey>
	    insert into Material_CargoLocationType_Data 
	    (wareHouseId, wareHouseCode, materialId,
	    	materialCode, materialLength, materialWidth,
	    	materialHeight, materialMaxStore, cargoLocationTypeId,
	    	cargoLocationTypeCode, cargoLocationTypeCanUseCount,
	    	cargoLocationTypeLength, cargoLocationTypeWidth,
	    	cargoLocationTypeHeight, cargoLocationTypeExtend,
	    	cargoLocationTypePallet, storeCount, usageRate,
	    	cargoLocationTypeVolume, placement
	    )values 
	    <foreach collection ="typeDataList" item="typeData" index= "index" separator ="," >
		    (#{typeData.wareHouseId,jdbcType=INTEGER}, #{typeData.wareHouseCode,jdbcType=VARCHAR}, #{typeData.materialId,jdbcType=INTEGER},
		    #{typeData.materialCode,jdbcType=VARCHAR}, #{typeData.materialLength,jdbcType=DOUBLE}, #{typeData.materialWidth,jdbcType=DOUBLE},
		    #{typeData.materialHeight,jdbcType=DOUBLE}, #{typeData.materialMaxStore,jdbcType=INTEGER}, #{typeData.cargoLocationTypeId,jdbcType=INTEGER},
		    #{typeData.cargoLocationTypeCode,jdbcType=VARCHAR}, #{typeData.cargoLocationTypeCanUseCount,jdbcType=INTEGER},
		    #{typeData.cargoLocationTypeLength,jdbcType=DOUBLE}, #{typeData.cargoLocationTypeWidth,jdbcType=DOUBLE},
		    #{typeData.cargoLocationTypeHeight,jdbcType=DOUBLE}, #{typeData.cargoLocationTypeExtend,jdbcType=BIT},
		    #{typeData.cargoLocationTypePallet,jdbcType=BIT}, #{typeData.storeCount,jdbcType=INTEGER}, #{typeData.usageRate,jdbcType=DOUBLE},
		    #{typeData.cargoLocationTypeVolume,jdbcType=DOUBLE},#{typeData.placement,jdbcType=VARCHAR})
	    </foreach >
  </insert>
</mapper>